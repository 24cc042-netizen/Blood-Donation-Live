{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar INST_CACHE_KEY = 'institutions.cache.v1';\nfunction isWeb() {\n  try {\n    return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  } catch (e) {\n    return false;\n  }\n}\nfunction setRaw(_x, _x2) {\n  return _setRaw.apply(this, arguments);\n}\nfunction _setRaw() {\n  _setRaw = _asyncToGenerator(function* (key, value) {\n    if (isWeb()) {\n      try {\n        window.localStorage.setItem(key, value);\n        return;\n      } catch (e) {}\n    }\n    yield AsyncStorage.setItem(key, value);\n  });\n  return _setRaw.apply(this, arguments);\n}\nfunction getRaw(_x3) {\n  return _getRaw.apply(this, arguments);\n}\nfunction _getRaw() {\n  _getRaw = _asyncToGenerator(function* (key) {\n    if (isWeb()) {\n      try {\n        var v = window.localStorage.getItem(key);\n        return v;\n      } catch (e) {}\n    }\n    return yield AsyncStorage.getItem(key);\n  });\n  return _getRaw.apply(this, arguments);\n}\nfunction removeRaw(_x4) {\n  return _removeRaw.apply(this, arguments);\n}\nfunction _removeRaw() {\n  _removeRaw = _asyncToGenerator(function* (key) {\n    if (isWeb()) {\n      try {\n        window.localStorage.removeItem(key);\n        return;\n      } catch (e) {}\n    }\n    yield AsyncStorage.removeItem(key);\n  });\n  return _removeRaw.apply(this, arguments);\n}\nexport function saveInstitutionsCache(_x5) {\n  return _saveInstitutionsCache.apply(this, arguments);\n}\nfunction _saveInstitutionsCache() {\n  _saveInstitutionsCache = _asyncToGenerator(function* (list) {\n    try {\n      yield setRaw(INST_CACHE_KEY, JSON.stringify({\n        data: list,\n        updatedAt: Date.now()\n      }));\n    } catch (err) {\n      console.warn('Failed to save institutions cache', err);\n    }\n  });\n  return _saveInstitutionsCache.apply(this, arguments);\n}\nexport function getInstitutionsCache() {\n  return _getInstitutionsCache.apply(this, arguments);\n}\nfunction _getInstitutionsCache() {\n  _getInstitutionsCache = _asyncToGenerator(function* () {\n    try {\n      var raw = yield getRaw(INST_CACHE_KEY);\n      if (!raw) return null;\n      return JSON.parse(raw);\n    } catch (err) {\n      console.warn('Failed to read institutions cache', err);\n      return null;\n    }\n  });\n  return _getInstitutionsCache.apply(this, arguments);\n}\nexport function clearInstitutionsCache() {\n  return _clearInstitutionsCache.apply(this, arguments);\n}\nfunction _clearInstitutionsCache() {\n  _clearInstitutionsCache = _asyncToGenerator(function* () {\n    try {\n      yield removeRaw(INST_CACHE_KEY);\n    } catch (err) {\n      console.warn('Failed to clear institutions cache', err);\n    }\n  });\n  return _clearInstitutionsCache.apply(this, arguments);\n}","map":{"version":3,"names":["AsyncStorage","INST_CACHE_KEY","isWeb","window","document","e","setRaw","_x","_x2","_setRaw","apply","arguments","_asyncToGenerator","key","value","localStorage","setItem","getRaw","_x3","_getRaw","v","getItem","removeRaw","_x4","_removeRaw","removeItem","saveInstitutionsCache","_x5","_saveInstitutionsCache","list","JSON","stringify","data","updatedAt","Date","now","err","console","warn","getInstitutionsCache","_getInstitutionsCache","raw","parse","clearInstitutionsCache","_clearInstitutionsCache"],"sources":["/workspaces/Blood-Donation-Live/lib/offlineCache.ts"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst INST_CACHE_KEY = 'institutions.cache.v1';\n\nfunction isWeb() {\n  try {\n    return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function setRaw(key: string, value: string) {\n  if (isWeb()) {\n    try { window.localStorage.setItem(key, value); return; } catch (e) { /* fallthrough */ }\n  }\n  await AsyncStorage.setItem(key, value);\n}\n\nasync function getRaw(key: string) {\n  if (isWeb()) {\n    try { const v = window.localStorage.getItem(key); return v; } catch (e) { /* fallthrough */ }\n  }\n  return await AsyncStorage.getItem(key);\n}\n\nasync function removeRaw(key: string) {\n  if (isWeb()) {\n    try { window.localStorage.removeItem(key); return; } catch (e) { /* fallthrough */ }\n  }\n  await AsyncStorage.removeItem(key);\n}\n\nexport async function saveInstitutionsCache(list: any[]) {\n  try {\n    await setRaw(INST_CACHE_KEY, JSON.stringify({ data: list, updatedAt: Date.now() }));\n  } catch (err) {\n    console.warn('Failed to save institutions cache', err);\n  }\n}\n\nexport async function getInstitutionsCache() {\n  try {\n    const raw = await getRaw(INST_CACHE_KEY);\n    if (!raw) return null;\n    return JSON.parse(raw);\n  } catch (err) {\n    console.warn('Failed to read institutions cache', err);\n    return null;\n  }\n}\n\nexport async function clearInstitutionsCache() {\n  try {\n    await removeRaw(INST_CACHE_KEY);\n  } catch (err) {\n    console.warn('Failed to clear institutions cache', err);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}